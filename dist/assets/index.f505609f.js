import{r as y,o as l,c as S,a as c,b as d,d as b,w as k,e as n,F as x,f as I,n as T,T as C,p as L,g as N,t as V,h as p,v as A,i as O,j as R,k as h,l as w,m as _,q as z,s as H,u as U}from"./vendor.772390ea.js";const D=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}};D();var f=(o,t)=>{const i=o.__vccOpts||o;for(const[u,e]of t)i[u]=e;return i};const B={};function K(o,t){const i=y("router-view");return l(),S(i)}var P=f(B,[["render",K]]);const g="http://localhost:8000/",F={methods:{toggle(){this.visible=!this.visible,setTimeout(()=>{this.$refs.title.focus()},1)},remove(o){c.delete(`${g}${o.pk}/`,{headers:{Authorization:`Token ${localStorage.getItem("token")}`}}).then(setTimeout(()=>{this.refresh()},4))},add({target:o}){let t={title:o.title.value,detail:o.detail.value};this.$refs.add.reset(),this.visible=!1,this.save(t)},save(o){c.post(g,o,{headers:{Authorization:`Token ${localStorage.getItem("token")}`}}).then(setTimeout(()=>{this.refresh()},10))},refresh(){c.get(g,{headers:{Authorization:`Token ${localStorage.getItem("token")}`}}).then(o=>{console.log(o),localStorage.setItem("list",JSON.stringify(o.data)),this.localRefresh()})},localRefresh(){let o=localStorage.getItem("list");o&&(this.list=JSON.parse(o))}},data(){return{visible:!1,list:[]}},mounted(){this.localRefresh(),this.refresh()},name:"Home",components:{}},m=o=>(L("data-v-d9cbb9b6"),o=o(),N(),o),M={class:"home"},$=R("Login"),j=m(()=>n("h1",null,"To do",-1)),q=["title"],E=["onClick"],J=m(()=>n("label",{for:"title"},"Title",-1)),W={type:"text",placeholder:"Title",ref:"title",name:"title"},G=m(()=>n("label",{for:"detail"},"Detail (if needed)",-1)),Q=m(()=>n("textarea",{placeholder:"Detail",form:"add",name:"detail"},null,-1)),X=m(()=>n("button",{type:"submit"},[n("span",{id:"create",class:"material-icons"},"\uE145")],-1));function Y(o,t,i,u,e,s){const r=y("router-link");return l(),d("div",M,[b(r,{to:"/sign/"},{default:k(()=>[$]),_:1}),j,n("table",null,[(l(!0),d(x,null,I(e.list,a=>(l(),d("tr",{key:a.pk},[n("td",{id:"title",title:a.detail},V(a.title),9,q),n("td",null,[n("span",{style:{"font-size":"30px"},onClick:me=>s.remove(a),class:"material-icons"},"\uE14C",8,E)])]))),128))]),n("span",{style:T(e.visible?"transform: rotate(-45deg);":""),onClick:t[0]||(t[0]=(...a)=>s.toggle&&s.toggle(...a)),id:"create",class:"material-icons"},"\uE145",4),b(C,{name:"resize"},{default:k(()=>[p(n("form",{onSubmit:t[1]||(t[1]=O((...a)=>s.add&&s.add(...a),["prevent"])),id:"add",ref:"add"},[J,n("input",W,null,512),G,Q,X],544),[[A,e.visible]])]),_:1})])}var Z=f(F,[["render",Y],["__scopeId","data-v-d9cbb9b6"]]);const v="http://localhost:8000/",ee={data(){return{login:!0,username:"",password:""}},methods:{submit({target:o}){o.id==="register"?c.post(`${v}register/`,{username:this.username,password:this.password}).then(t=>{c.post(`${v}api-token-auth/`,{username:this.username,password:this.password}).then(i=>{localStorage.setItem("token",i.data.token),window.location.href="/"})}):c.post(`${v}api-token-auth/`,{username:this.username,password:this.password}).then(t=>{localStorage.setItem("token",t.data.token),window.location.href="/"})}},name:"Sign"},te={class:"sign"},se={key:0},oe=n("h1",null,"Log In",-1),ne={key:1,class:"change"},re=n("p",null,"Don't have an account?",-1),ie={key:2,class:"change"},le=n("p",null,"Have an account?",-1),ae={key:3},de=n("h1",null,"Register",-1);function ue(o,t,i,u,e,s){return l(),d("div",te,[e.login?(l(),d("div",se,[oe,p(n("input",{type:"text",placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=r=>e.username=r)},null,512),[[h,e.username]]),p(n("input",{onKeyup:t[1]||(t[1]=w((...r)=>s.submit&&s.submit(...r),["enter"])),type:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=r=>e.password=r)},null,544),[[h,e.password]]),n("button",{onClick:t[3]||(t[3]=(...r)=>s.submit&&s.submit(...r))},"Login")])):_("",!0),e.login?(l(),d("div",ne,[re,n("button",{onClick:t[4]||(t[4]=r=>e.login=!e.login)},"Register")])):_("",!0),e.login?_("",!0):(l(),d("div",ie,[le,n("button",{onClick:t[5]||(t[5]=r=>e.login=!e.login)},"Log In")])),e.login?_("",!0):(l(),d("div",ae,[de,p(n("input",{type:"text",placeholder:"Username","onUpdate:modelValue":t[6]||(t[6]=r=>e.username=r)},null,512),[[h,e.username]]),p(n("input",{onKeyup:t[7]||(t[7]=w((...r)=>s.submit&&s.submit(...r),["enter"])),type:"password",placeholder:"Password","onUpdate:modelValue":t[8]||(t[8]=r=>e.password=r)},null,544),[[h,e.password]]),n("button",{id:"register",onClick:t[9]||(t[9]=(...r)=>s.submit&&s.submit(...r))},"Register")]))])}var ce=f(ee,[["render",ue]]);const pe=z({history:H(),routes:[{path:"/",name:"Home",component:Z},{path:"/sign/",name:"Sign",component:ce}]});U(P).use(pe).mount("#app");
